## 目录
- 为什么要用 iTop
- iTop，CMDB，ITSM 是什么
- iTop 定制开发
- 案例介绍
- 操作演示

# 为什么要用 iTop

## 背景

运维组作为研发和公司运维部门间的桥梁，负责团队资源管理，主要提供以下服务

| 服务 | 需要提供的信息 |
|----|----------|
|虚拟机申请 | 规格（4C8G，8C16G），机房等 |
|域名申请或变更|域名，解析地址等|
|业务名称注册|名称，优先级，归属业务线等|
|数据库缓存申请|规格，访问量预估等|

缺乏流程工具支持，研发和运维的沟通使用邮件或者 IM 工具，双方满意度都不高。

## 痛点-用户侧

- 新用户不了解有哪些服务
- 不同服务需要提供的信息不一样，需要维护不同的邮件模板
- 难以追踪需求处理进度，交付时间较长，满意度差

## 痛点-运维侧
- 难以追踪需求处理进度，靠人力维护优先级，处理效率低
- 增加和用户间的沟通成本，比如需要反复告知服务需要提供的信息
- 琐事多，运维满意度差
- 需求完成之后需要人工维护软硬件资产配置信息（通过 Wiki 或 Excel）
  - 随着业务及资产数量的增多（1000+），工作量大，难维护，效率低
  - 难保证准确性，不敢用，查不到需要的信息
  - 无法编程处理，难以审计，除了提供不太准确的查询，难以产生更大价值
  - 难以控制熵增，难以掌握资源使用情况，资源空跑，增加成本

# 老板：为什么花了这么多钱？！

# 降本增效，引入 CMDB 和流程工具

## 流程 是什么
IT 组织中的流程大致可以划分为以下几类：

- 用户需求，如申请一台服务器，申请解析一个域名，添加一个账号等都是需求
- 事件跟踪和处理，如监控报警事件，用户报障
- 变更跟踪和处理，变更可以是用户需求或者事件引起的，也可以是 IT 团队根据主动发现的问题发起的，或者软件版本升级等

这些正是 ITIL^[ITIL 是 CCTA（英国国家电脑局）于 1980 年开发的一套 IT 服务管理（IT Service Management，ITSM）标准库。它把英国在 IT 管理方面的方法归纳起来，变成规范，为企业的 IT 部门提供一套从计划、研发、实施到运维的标准方法] 里总结的 请求管理，事件管理以及变更管理。

## CMDB 是什么
CMDB 是配置管理数据库（Configuration Management Database）的缩写。CMDB 是一类产品形式，有以下特点或者功能：

- 提供建模能力，能够描述 IT 组织的软硬件资产，业务，人员等
- 能够描述和管理模型间的关联关系，生成和展示拓扑图
- 查询，导入，导出，统计报表等日常使用的工具
- CMDB 是 ITIL 的一部分，要存储 ITIL 流程产生的配置数据，因此通常还需要和 ITIL 流程做一些整合

CMDB 是 IT 组织的情报中心。丰富，完整，准确的 CMDB 数据是自动化运维的基石。

## iTop 是什么

:::::{.columns}
:::{.column width=35%}
![](images/itop-logo.svg)
:::
:::{.column width=60%}
- iTop stands for IT Operational Portal（IT 运营门户） 
- iTop 是一个 ITIL 软件
- iTop 是 CMDB
- iTop 是 ITSM 工具
- iTop 是开源免费的软件
:::
:::::

## 数据模型

## 关联关系-影响分析

![](images/impacts.pdf)

## 收益

# iTop 定制开发

## iTop 架构
![](images/itop-architecture.pdf)

## 自定义模型

### 查看数据模型

![](images/classlnk.pdf)

## 集成其他系统

# 案例

## URL 自助监控

## 央行金融业数据上报

## 参考资料

- Combodo 主页：https://www.combodo.com/
- 源码：https://github.com/Combodo/iTop
- 下载：https://sourceforge.net/projects/itop/
- 文档：https://www.itophub.io/wiki/page
- iTopHub：https://www.itophub.io/